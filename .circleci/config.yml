version: 2.1
jobs:
  build:
    docker:
      - image: localstack/localstack
    steps:
      - checkout
      - run: echo "this is the build job"
  test:
    docker:
      - image: localstack/localstack
    steps:
      - checkout
      - run: echo "this is the test job"

# Orchestrate our job run sequence
workflows:
  build_and_test:
    jobs:
      - build
      - test

version: 2.1
orbs:
  localstack: localstack/platform@1.0
jobs:
  run-integration-tests:
    executor: localstack/default
    steps:
      - localstack/startup
      - run:
          command: awslocal sqs create-queue --queue-name segment
      - run:
          command: awslocal sqs get-queue-attributes --attribute-names All --queue-url=segment
      - run:
          command: echo "Execute your tests here :)"
workflows:
  integration-test:
    jobs:
      - run-integration-tests